import requests
import sys
import string

def recursive_request(url):
    print("searching {}".format(url) )
    result = requests.get(url, headers=headers).text.split("\n")
    for line in result:
        if "href=" in line and "../" not in line:
            file_name=line[line.find('"')+1:line.rfind('"')]
            if target == file_name:
                print("target found, it is in {}".format(url+file_name))
                exit()
            elif file_name[-1]=="/":
                recursive_request(url+file_name)
            else:
                pass
#proxies = {'http':'http://127.0.0.1:8080','https':'http://127.0.0.1:8080'}
#url = sys.argv[1]

url="http://188.166.173.208:32164/wp-content/plugins/mail-masta/"
headers = {"User-Agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36","Cookie":"WP Cookie check"}
target="flag.txt"

recursive_request(url)

